<div class="row">
    <h4 ng-show="!controller.speciesId">
        Classification Stats
        <span class="badge">{{controller.stats.length}} species</span>
    </h4>
    <h4 ng-show="controller.speciesId">
        <button class="btn btn-default"
            ng-click="controller.setSpecies() | trackEvent:'Analysis-Citizen-Scientist-Stats':' go back'">
            &lt;  Go Back
        </button>
        Classification Stats / {{controller.species.scientific_name}}
    </h4>
</div>
<div class="row">
    <div class="col-sm-12" ng-show="!controller.speciesId">
        <a2-table class="table-hide-btns"
            rows="controller.stats" no-checkbox="true"
            ext-sort="sortRecs(sortBy, reverse)"
            default-sort="site"
            ng-show="!controller.loading"
            on-select="controller.setSpecies(row.species_id)"
        >
            <field title="Species"    filter key="species" >{{ row.species  }}</field>
            <field title="Songtype"   filter key="songtype">{{ row.songtype }}</field>
            <field title="Stats"      key="stats" width="50%" >
                <a2-percentage-bars data="[row.present, row.notPresent, row.notValidated]"
                        popover-html="'<span class=\'swatch val-1\'></span> Present: {{row.present}} ({{row.present * 100 / row.count | number:0}}%)<br />
                                 <span class=\'swatch val-0\'></span> Not Present: {{row.notPresent}} ({{row.notPresent * 100 / row.count | number:0}}%)<br />
                                 <span class=\'swatch val-2\'></span> Not Validated: {{row.notValidated}} ({{row.notValidated * 100 / row.count | number:0}}%)'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                />
            </field>
        </a2-table>
        <loader ng-hide="!controller.loading"></loader>
    </div>
    <div class="col-sm-12" ng-show="controller.speciesId">
        <a2-table class="table-hide-btns"
            ng-show="!controller.loadingForSpecies"
            rows="controller.speciesStats" no-checkbox="true"
            ext-sort="sortRecs(sortBy, reverse)"
            default-sort="site"
            no-select
        >
            <field title="Pattern Matching"    filter key="name" >{{ row.name }}</field>
            <field title="Stats"      key="stats" width="50%" >
                <a2-percentage-bars data="[row.present, row.notPresent, row.notValidated]"
                        popover-html="'<span class=\'swatch val-1\'></span> Present: {{row.present}} ({{row.present * 100 / row.count | number:0}}%)<br />
                                 <span class=\'swatch val-0\'></span> Not Present: {{row.notPresent}} ({{row.notPresent * 100 / row.count | number:0}}%)<br />
                                 <span class=\'swatch val-2\'></span> Not Validated: {{row.notValidated}} ({{row.notValidated * 100 / row.count | number:0}}%)'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                />
            </field>
        </a2-table>
        <loader ng-hide="!controller.loadingForSpecies"></loader>
    </div>
</div>
