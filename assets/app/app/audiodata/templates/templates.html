
<div class="row">
    <div class="col-sm-12">
        <div class="row panel-body">
            <ul class="nav nav-tabs col-md-12">
                <li class="nav-item" ng-class="{ active: controller.currentTab === 'projectTemplates' }">
                    <a class="nav-link" href=""
                        ng-click="controller.toggleTab('projectTemplates')">Project Templates</a>
                </li>
                <li class="nav-item" ng-class="{ active: controller.currentTab === 'publicTemplates' }">
                    <a class="nav-link" href=""
                        ng-click="controller.toggleTab('publicTemplates')">Public Templates</a>
                </li>
              </ul>
        </div>
        <div class="row templates">
            <div class="col-md-12">
                <loader ng-if="controller.loading"></loader>
                <a2-table ng-if="!controller.loading" search="search" rows="controller.templates" no-checkbox>
                    <field tdclass="is-v-middle" tdclass="spectrogram-img">
                        <div class="roi-thumbnail" >
                            <img ng-src="{{row.uri}}" class="roi-img is-small"/>
                            <a class="roi-btn-bl cs-pointer" ng-click="controller.playTemplateAudio(row, $event)">
                                <i tooltip-placement="left"
                                    tooltip-append-to-body="true"
                                    tooltip="Play Audio"
                                    class="fa fa-play">
                                </i>
                            </a>
                            <a class="roi-btn-br" ng-href="{{controller.getTemplateVisualizerUrl(row)}}">
                                <i tooltip-placement="left"
                                    tooltip-append-to-body="true"
                                    tooltip="View in Visualizer"
                                    class="fa fa-cubes">
                                </i>
                            </a>
                        </div>
                    </field>
                    <field title="Name" key="name" filter tdclass="is-v-middle name">
                        <div>
                            <p class="m-0 is-v-middle no-wrap hidelongtext" title="{{ row.name }}">{{ row.name }}</p>
                            <a class="is-v-middle"
                                ng-if="controller.currentTab === 'projectTemplates' && row.project !== row.source_project_id && row.source_project_id !== null"
                                ng-click="controller.goToSourceProject(row.source_project_id)">
                                <i aria-hidden="true" class="glyphicon glyphicon-link pl-2"></i>linked
                            </a>
                        </div>
                    </field>
                    <field title="Species" key="species_name" filter tdclass="is-v-middle no-wrap hidelongtext">
                        {{ row.species_name }}
                    </field>
                    <field title="Song type" key="songtype_name" tdclass="is-v-middle no-wrap hidelongtext">
                        {{ row.songtype_name }}
                    </field>
                    <field title="Author" key="author" filter tdclass="is-v-middle no-wrap hidelongtext" show="controller.currentTab === 'publicTemplates'">
                        <span title="{{ row.author }}">
                            {{ row.author }}
                        </span>
                    </field>
                    <field title="Project" key="project_name" filter tdclass="is-v-middle no-wrap hidelongtext" show="controller.currentTab === 'publicTemplates'">
                        {{ row.project_name }}
                    </field>
                    <field title="Sampling" key="sampling_rate" tdclass="is-v-middle no-wrap" show="controller.currentTab === 'publicTemplates'">
                        {{ row.sample_rate }}
                    </field>
                    <field title="Date created" key="date_created" tdclass="is-v-middle no-wrap">
                        {{ row.date_created | moment: 'll' }}
                    </field>
                    <field title="Source" key="source_project_name" filter tdclass="is-v-middle no-wrap hidelongtext" show="controller.currentTab === 'projectTemplates'" tdclass="source">
                        <span title="{{ row.name }}">
                            {{ row.project !== row.source_project_id && row.source_project_id !== null ? row.author + ' / ' + row.source_project_name : '-' }}
                        </span>
                    </field>
                    <field tdclass="is-v-middle">
                        <button class="btn btn-default"
                            ng-if="controller.currentTab === 'projectTemplates'"
                            ng-click="controller.deleteTemplate(row.id) | trackEvent:'Audiodata-template':'del clicked'"
                            tooltip="Delete Template"
                            tooltip-trigger="mouseenter">
                            <i class="fa fa-trash"></i>
                        </button>
                        <button class="btn btn-default"
                            ng-if="controller.currentTab === 'publicTemplates'"
                            ng-click="controller.addTemplate(row) | trackEvent:'Audiodata-template':'add clicked'"
                            tooltip="Add Template"
                            tooltip-trigger="mouseenter">
                            <i class="fa fa-plus"></i>
                        </button>
                    </field>
                </a2-table>
                <div ng-if="controller.templates && (controller.paginationSettings.totalItems > controller.paginationSettings.limit)" class="row">
                  <div class="col-sm-12">
                      <pagination total-items="controller.paginationSettings.totalItems"
                          ng-model="controller.paginationSettings.page"
                          ng-change="controller.setCurrentPage()"
                          class="pagination-sm"
                          boundary-links="true"
                          max-size="10"
                          rotate="false"
                          num-pages="controller.paginationSettings.totalPages"
                          ng-disabled="controller.loading"
                          items-per-page="controller.paginationSettings.limit">
                      </pagination>
                  </div>
              </div>
                <div class="jumbotron" ng-show="(!controller.templates || controller.templates.length == 0) && !controller.loading">
                    <h3>
                        No templates found.
                    </h3>
                </div>
            </div>
        </div>

    </div>
</div>
