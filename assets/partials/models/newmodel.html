<form name="modelForm" role="form">
    <div class="modal-header">
        <h3 class="modal-title">Create a new model</h3>
    </div>
    <div class="modal-body">
        <div class="form-group">
            <label for="modelName">Model name:</label>
            <input name="modelName" ng-model="data.name" type="text" class="form-control" placeholder="Enter model name" />
            <span ng-bind="nameMsg" class="nameExistsSpan"></span>
        </div>
        <div class="form-group">
            <label for="classifier">Classifier:</label>
            <ui-select ng-model="data.classifier" theme="bootstrap" ng-disabled="disabled">
                <ui-select-match placeholder="Select a classifier">{{$select.selected.name}}</ui-select-match>
                <ui-select-choices repeat="type in types | filter: $select.search" value="type.model_type_id">
                    <strong>{{type.name}}</strong>
                    <p>
                        <em>
                            <small>{{type.description}}</small>
                        </em>
                    </p>
                </ui-select-choices>
            </ui-select>
        </div>
        <div class="form-group">
            <label for="trainingSet">Training Set:</label>
            <span ng-hide="trainings.length" value="-1" class="red">
                <em>No training sets found. <a ng-click="cancel('/audiodata/training-sets') | trackEvent:'Analysis-Newmodel':'cancel goto training-sets'">Create one.</a></em>
            </span>
            <ui-select ng-model="data.training" theme="/partials/a2-ui-select" ng-disabled="disabled">
                <ui-select-match placeholder="Search and select a training set">{{$select.selected.name}}</ui-select-match>
                <ui-select-choices repeat="train in trainings | filter: $select.search" value="train.training_set_id">
                    {{train.name}}
                    <p><small>
                        <strong>Species:</strong> {{train.scientific_name}} 
                        <strong>Songtype:</strong> {{train.songtype}} 
                        <span class="pull-right"><strong>Count:</strong> ({{train.count}}) </span>
                    </small></p>
                </ui-select-choices>
            </ui-select>
        </div>
        <div ng-show="data.training.training_set_id">
            <p>
                <b>Validated recordings available</b>
                <i class="fa fa-question-circle" 
                    tooltip="A validation tells if a species is present or not in a recording." 
                    tooltip-placement="right"></i>
            </p>
                <div class="row">
                    <div class="col-xs-12">
                        <b>for:</b> {{data.training.scientific_name}} ({{data.training.songtype}})
                    </div>
                    <!-- <div class="col-sm-4 inline">
                        <em>
                            <strong>Total validations:</strong> {{data.totalValidations}}</em>
                    </div> -->
                </div>
                <div class="row top-buffer">
                    <div class="col-xs-12">
                        <table class="table">
                                <tr>
                                    <td class="text-right">Total: </td>
                                    <td>{{data.totalValidations}}</td>
                                    <td><b>Use in fitting:</b></td>
                                    <td><b>Use in validation:</b></td>
                                </tr>
                                <tr>
                                    <td class="text-right">Present: </td>
                                    <td>{{data.presentValidations}}</td>
                                    <td>
                                        <input size="10" type="text" name="usePresentTraining" ng-model="data.usePresentTraining" />
                                    </td>
                                    <td>
                                        <input size="10" type="text" name="usePresentValidation" ng-model="data.usePresentValidation" disabled/>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-right">Absent: </td>
                                    <td>{{data.absentsValidations}}</td>
                                    <td>
                                        <input size="10" type="text" name="usePresentTraining" ng-model="data.useNotPresentTraining" />
                                    </td>
                                    <td>
                                        <input size="10" type="text" name="usePresentValidation" ng-model="data.useNotPresentValidation" disabled/>
                                    </td>
                                </tr>
                                <!-- <tr>
                                    
                                    <td>{{data.presentValidations}}</td>
                                    <td>{{data.absentsValidations}}</td>
                                </tr> -->
                        </table>
                    </div>
                </div>
                <!-- <div class="row top-buffer">
                    <div class="col-sm-6 inline">
                        <em>
                            <strong>Present validations:</strong> {{data.presentValidations}}</em>
                        <table>
                            <tr>
                                <td>Use in fitting:</td>
                                <td>
                                    <input size="10" type="text" name="usePresentTraining" ng-model="data.usePresentTraining" />
                                </td>
                            </tr>
                            <tr>
                                <td>Use in verification:</td>
                                <td>
                                    <input size="10" type="text" name="usePresentValidation" ng-model="data.usePresentValidation" disabled/>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-sm-6 inline">
                        <em>
                            <strong>Not present validations:</strong> {{data.absentsValidations}}</em>
                        <table> -->
                            <!--<tr><td><strong>Usage In Validation:</strong></td></tr>-->
                            <!-- <tr>
                                <td>Use in fitting:</td>
                                <td>
                                    <input size="10" type="text" name="useNotPresentTraining" ng-model="data.useNotPresentTraining" />
                                </td>
                            </tr>
                            <tr>
                                <td>Use in verification:</td>
                                <td>
                                    <input size="10" type="text" name="useNotPresentValidation" ng-model="data.useNotPresentValidation" disabled/>
                                </td>
                            </tr>
                        </table>
                    </div> -->
                    <!--<div class="col-sm-4 inline"<em><strong>Total Validations:</strong> {{data.totalValidations}}</em></div>-->
                <!-- </div> -->
        </div>
        <!--
      <div class="form-group">
        <label for="validationSet">Validation Set:</label>
        <span ng-hide="validations.length" value="-1" class="red">Need to create validation sets first</span>  
        <ui-select ng-model="data.validation" theme="selectize" ng-disabled="disabled">
        <ui-select-match placeholder="Select or search a validation set in the list...">{{$select.selected.name}}</ui-select-match>
            <ui-select-choices repeat="vali in validations | filter: $select.search" value="vali.validation_set_id">
              {{vali.name}}
            </ui-select-choices>
        </ui-select>
      </div>
  -->

    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok() | trackEvent:'Analysis-Newmodel':'ok new model'" ng-disabled="buttonEnable()">Create</button>
        <button class="btn btn-default" ng-click="cancel() | trackEvent:'Analysis-Newmodel':'cancel'">Close</button>
    </div>
</form>
