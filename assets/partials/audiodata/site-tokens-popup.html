<div class="modal-header">
    Create Token for site {{popup.site.name}}
</div>

<div class="modal-body">
    <p>
        This option allows you to create an access token for this site.
        Using this token, ARBIMON recorders can upload its recordings to automatically.
    </p>
    <p ng-show="popup.site.token_created_on">
        A token for this site was created on {{(popup.site.token_created_on * 1000) | moment}}.
        <span ng-hide="popup.token">Only one token can be active at a time. Generating a new token will automatically invalidate any previously generated tokens.</span>
    </p>
    <p ng-hide="popup.site.token_created_on">
        No access tokens have been created for this site.
    </p>
    <p ng-show="popup.token">
        Token generated. <br />
        <a2-qr-code data="{{popup.token}}" />
        Scan this token with the ARBIMON recorder. <br />
        
    </p>
</div>
<div class="modal-footer">
    <button class="btn btn-primary" ng-disabled="popup.loading.generate || popup.token" ng-click="popup.action.generate_token()  | trackEvent:'PopUp':'generate'"
        >{{
        popup.loading.generate ? "Generating Token..." : (popup.token ? "Token Generated" : "Generate New Token")
    }}</button>
    <button ng-show="popup.site.token_created_on" ng-disabled="!popup.site.token_created_on || popup.loading.revoke" class="btn btn-danger" ng-click="popup.action.revoke_token($dismiss) | trackEvent:'SiteToken':'revoke'">{{popup.loading.revoke ? "Revoking Token..." : "Revoke Existing Token"}}</button>
    <button class="btn btn-default" ng-click="$dismiss()  | trackEvent:'PopUp':'close'">Close</button>
</div>
