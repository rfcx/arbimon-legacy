#### Server route map:

| route | method | action | mime | pre-condition | route file |
|-----------|
| /                                                                                   | GET  | render 'login' page                                                                | text/html                                | - |  login.js |
| /activate/:hash                                                                     | GET  | activates user account identified by `:hash`. renders 'activate' page              | text/html                                | - | login.js |
| /admin/                                                                             | GET  | render 'admin' page                                                                | text/html                                | isSuper | admin.js |
| /admin/dashboard-stats                                                              | GET  | return dashboard stats                                                             | application/json                         | isSuper | admin.js |
| /admin/job-queue                                                                    | GET  | return job queue stats                                                             | application/json                         | isSuper | admin.js |
| /admin/jobs                                                                         | GET  | return job stats                                                                   | application/json                         | isSuper | admin.js |
| /alive                                                                              | GET  | http 200                                                                           | -                                        | - | index.js |
| /api/email_available                                                                | GET  | check if email is available                                                        | application/json                         | - | login.js |
| /api/job/types                                                                      | GET  | return list of job types                                                           | application/json                         | - | data-api/models.js |
| /api/login_available                                                                | GET  | check if username is available                                                     | application/json                         | - | login.js |
| /api/project/:projectUrl/class/add                                                  | POST | adds a project class                                                               | application/json                         | "manage project species" permission | data-api/project/index.js |
| /api/project/:projectUrl/class/del                                                  | POST | deletes a project class                                                            | application/json                         | "manage project species" permission | data-api/project/index.js |
| /api/project/:projectUrl/classes                                                    | GET  | return project classes                                                             | application/json                         | - | data-api/project/index.js |
| /api/project/:projectUrl/classification/:cid                                        | GET  | return details of a classification given its id                                    | application/json                         | - | data-api/models.js |
| /api/project/:projectUrl/classification/:cid/delete                                 | GET  |  deletes a classification                                                          | application/json                         | "manage models and classification" permission | data-api/models.js |
| /api/project/:projectUrl/classification/:cid/vector/:recId                          | GET  | return classification vector associated to (recording, classification) pair        | application/json                         | - | data-api/models.js |
| /api/project/:projectUrl/classification/:classiId/more/:from/:total                 | GET  | return more details of a classification                                            | application/json                         | - | data-api/models.js |
| /api/project/:projectUrl/classification/new                                         | POST | creates a new classification job                                                   | application/json                         | "manage models and classification" permission | data-api/models.js |
| /api/project/:projectUrl/classifications                                            | GET  | return list of classifications in project                                          | application/json                         | - | data-api/models.js |
| /api/project/:projectUrl/info                                                       | GET  | return project info                                                                | application/json                         | - | data-api/project/index.js |
| /api/project/:projectUrl/info/update                                                | POST | updates project info                                                               | application/json                         | "manage project settings" permission | data-api/project/index.js |
| /api/project/:projectUrl/job/cancel/:jId                                            | GET  | cancels the given job                                                              | application/json                         | - (proposed: ??? permission) | data-api/models.js |
| /api/project/:projectUrl/job/hide/:jId                                              | GET  | hides the given job                                                                | application/json                         | - (proposed: ??? permission) | data-api/models.js |
| /api/project/:projectUrl/models                                                     | GET  | return list of models in project                                                   | application/json                         | - | data-api/models.js |
| /api/project/:projectUrl/models/:mid                                                | GET  | return details of model with id `:mid`                                             | application/json                         | - | data-api/models.js |
| /api/project/:projectUrl/models/:mid/delete                                         | GET  | deletes a given model                                                              | application/json                         | "manage models and classification" permission | data-api/models.js |
| /api/project/:projectUrl/models/:modelId/training-vector/:recId                     | GET  | return training vector associated to (recording, model) pair                       | application/json                         | - | data-api/models.js |
| /api/project/:projectUrl/models/:modelId/validation-list                            | GET  | return validation list associated to model                                         | application/json                         | - | data-api/models.js |
| /api/project/:projectUrl/models/forminfo                                            | GET  | return list of model types and training sets                                       | application/json                         | - | data-api/models.js |
| /api/project/:projectUrl/models/new                                                 | POST | creates a training job                                                             | application/json                         | "manage models and classification" permission | data-api/models.js |
| /api/project/:projectUrl/models/savethreshold                                       | POST | sets the model's threshold                                                         | application/json                         | - (proposed: "manage models and classification" permission) | data-api/models.js |
| /api/project/:projectUrl/playlists/                                                 | GET  | return a list of all the playlists in a project.                                   | application/json                         | - | data-api/project/playlists.js |
| /api/project/:projectUrl/playlists/:playlist                                        | GET  | return a playlist's data.                                                          | application/json                         | - | data-api/project/playlists.js |
| /api/project/:projectUrl/playlists/:playlist/:recid/next                            | GET  | return next recording in playlist                                                  | application/json                         | - | data-api/project/playlists.js |
| /api/project/:projectUrl/playlists/:playlist/:recid/position                        | GET  | return recordings position in playlist                                             | application/json                         | - | data-api/project/playlists.js |
| /api/project/:projectUrl/playlists/:playlist/:recid/previous                        | GET  | return previous recording in playlist                                              | application/json                         | - | data-api/project/playlists.js |
| /api/project/:projectUrl/playlists/create                                           | POST | creates a new playlist                                                             | application/json                         | "manage playlists" permission | data-api/project/playlists.js |
| /api/project/:projectUrl/playlists/delete                                           | POST | deletes a playlist                                                                 | application/json                         | "manage playlists" permission | data-api/project/playlists.js |
| /api/project/:projectUrl/playlists/info/:playlist                                   | GET  | return a playlist's extra info.                                                    | application/json                         | - | data-api/project/playlists.js |
| /api/project/:projectUrl/progress                                                   | GET  | return list of active jobs                                                         | application/json                         | - | data-api/models.js |
| /api/project/:projectUrl/recordings/:get/:oneRecUrl?                                | GET  | return different stats (depends on `:get`) about a given recording                 | application/json                         | - | data-api/project/recordings.js |
| /api/project/:projectUrl/recordings/available/:recUrl?                              | GET  | return count of available recordings at different grouping levels                  | application/json                         | - | data-api/project/recordings.js |
| /api/project/:projectUrl/recordings/count                                           | GET  | count recordings in project                                                        | application/json                         | - | data-api/project/recordings.js |
| /api/project/:projectUrl/recordings/:recUrl?                                        | GET  | return recordings matching the given `:recUrl`                                     | application/json                         | - | data-api/project/recordings.js |
| /api/project/:projectUrl/recordings/count/:recUrl?                                  | GET  | return count of recordings matching the given `:recUrl`                            | application/json                         | - | data-api/project/recordings.js |
| /api/project/:projectUrl/recordings/delete                                          | POST | deletes a recording                                                                | application/json                         | "manage project recordings" permission | data-api/project/recordings.js |
| /api/project/:projectUrl/recordings/exists/site/:siteid/file/:filename              | GET  | return whether the given recording exists in the given site                        | application/json                         | - | data-api/project/recordings.js |
| /api/project/:projectUrl/recordings/search                                          | GET  | search for recording matching query                                                | application/json                         | - | data-api/project/recordings.js |
| /api/project/:projectUrl/recordings/tiles/:oneRecUrl/:i/:j                          | GET  | return the tile a given recordings' spectrogram                                    | application/json                         | - | data-api/project/recordings.js |
| /api/project/:projectUrl/recordings/validate/:oneRecUrl?                            | POST | adds a species validation to the given recording                                   | application/json                         | "validate species" permission | data-api/project/recordings.js |
| /api/project/:projectUrl/roles                                                      | GET  | return roles list                                                                  | application/json                         | - | data-api/project/index.js |
| /api/project/:projectUrl/sites/                                                     | GET  | return list of sites in project                                                    | application/json                         | - | data-api/project/sites.js |
| /api/project/:projectUrl/sites/create                                               | POST | create a site in a project                                                         | application/json                         | "manage project sites" permission | data-api/project/sites.js |
| /api/project/:projectUrl/sites/delete                                               | POST | deletes a site                                                                     | application/json                         | "manage project sites" permission | data-api/project/sites.js |
| /api/project/:projectUrl/sites/generate-token                                       | POST | generates a site token                                                             | application/json                         | "manage project sites" and "manage project recordings" permission | data-api/project/sites.js |
| /api/project/:projectUrl/sites/import                                               | POST | imports a site to a project                                                        | application/json                         | - (proposed: "manage project sites" permission) | data-api/project/sites.js |
| /api/project/:projectUrl/sites/revoke-token                                         | POST | revokes a site token                                                               | application/json                         | "manage project sites" and "manage project recordings" permission | data-api/project/sites.js |
| /api/project/:projectUrl/sites/update                                               | POST | updates a site's data                                                              | application/json                         | "manage project sites" permission | data-api/project/sites.js |
| /api/project/:projectUrl/soundscape/new                                             | POST | create new soundscape job                                                          | application/json                         | "manage soundscapes" permission | data-api/models.js |
| /api/project/:projectUrl/soundscapes/                                               | GET  | return a list of all the soundscapes in a project.                                 | application/json                         | - | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape                                    | GET  | return details of soundscapes given its id                                         | application/json                         | - | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/delete                             | GET  | deletes a soundscape                                                               | application/json                         | "manage soundscapes" permission | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/export-list                        | GET  | export the soundscape data as a csv                                                | text/csv                                 | - | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/indices                            | GET  | return the soundscape indices                                                      | application/json                         | - | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/norm-vector                        | GET  | return a soundscape's norm vector                                                  | application/json                         | - | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/recordings/:bbox                   | GET  | returns soundscape data intersecting `:bbox`                                       | application/json                         | - | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/regions/                           | GET  | return list of soundscape regions                                                  | application/json                         | - | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/regions/:region                    | GET  | return details of a given region                                                   | application/json                         | - | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/regions/:region/sample             | POST | samples a soundscape region                                                        | application/json                         | - | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/regions/:region/tags/:recid        | GET  | return a soundscape regions' tags                                                  | application/json                         | - | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/regions/:region/tags/:recid/add    | POST | adds a soundscape region tag                                                       | application/json                         | "manage soundscapes" permission | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/regions/:region/tags/:recid/remove | POST | removes a soundscape region tag                                                    | application/json                         | "manage soundscapes" permission | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/regions/add                        | POST | add a soundscape region                                                            | application/json                         | "manage soundscapes" permission | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/scale                              | POST | sets soundscape visualization options                                              | application/json                         | "manage soundscapes" | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/:soundscape/scidx                              | GET  | return the scidx file of a soundscape                                              | application/json                         | - | data-api/project/soundscapes.js |
| /api/project/:projectUrl/soundscapes/details                                        | GET  | return details of soundscapes in a project                                         | application/json                         | - | data-api/project/soundscapes.js |
| /api/project/:projectUrl/training-sets/                                             | GET  | Return a list of all the training sets in a project.                               | application/json                         | - | data-api/project/training_sets.js |
| /api/project/:projectUrl/training-sets/:trainingSet/remove-roi/:roiId               | GET  | removes a roi from the given training set                                          | application/json                         | "manage training sets" permission | data-api/project/training_sets.js |
| /api/project/:projectUrl/training-sets/add                                          | POST | adds a new training set to the project                                             | application/json                         | "manage training sets" permission | data-api/project/training_sets.js |
| /api/project/:projectUrl/training-sets/add-data/:trainingSet                        | POST | adds data to the given training set                                                | application/json                         | "manage training sets" permission | data-api/project/training_sets.js |
| /api/project/:projectUrl/training-sets/data/:trainingSet/get-image/:dataId          | GET  | return a training set's data image                                                 | application/json                         | - | data-api/project/training_sets.js |
| /api/project/:projectUrl/training-sets/list/:trainingSet/:recUrl?                   | GET  | return a training set's data.                                                      | application/json                         | - | data-api/project/training_sets.js |
| /api/project/:projectUrl/training-sets/rois/:trainingSet                            | GET  | return a training set's rois                                                       | application/json                         | - | data-api/project/training_sets.js |
| /api/project/:projectUrl/training-sets/species/:trainingSet                         | GET  | return a training set species list                                                 | application/json                         | - | data-api/project/training_sets.js |
| /api/project/:projectUrl/training-sets/types                                        | GET  | return a list of all the training set types in a project (actually in the system). | application/json                         | - | data-api/project/training_sets.js |
| /api/project/:projectUrl/usage                                                      | GET  | return project usage                                                               | application/json                         | - | data-api/project/index.js |
| /api/project/:projectUrl/user/add                                                   | POST | add user to project                                                                | application/json                         | "manage project settings" permission | data-api/project/index.js |
| /api/project/:projectUrl/user/del                                                   | POST | remove user from project                                                           | application/json                         | "manage project settings" permission | data-api/project/index.js |
| /api/project/:projectUrl/user/role                                                  | POST | change user role                                                                   | application/json                         | "manage project settings" permission | data-api/project/index.js |
| /api/project/:projectUrl/users                                                      | GET  | return project users list                                                          | application/json                         | - | data-api/project/index.js |
| /api/project/:projectUrl/validations/:species/:songtype                             | GET  | return validation stats                                                            | application/json                         | - | data-api/models.js |
| /api/project/:projectUrl/validations/count                                          | GET  | return validation count                                                            | application/json                         | - | data-api/project/index.js |
| /api/project/classification/csv/:cid                                                | GET  | return csv export of classification data                                           | text/csv, text/html if has no permission | "manage models and classification" permission | data-api/models.js |
| /api/project/create                                                                 | POST | creates a project                                                                  | application/json                         | does not exceed user limit | data-api/project/index.js |
| /api/sites/published                                                                | GET  | return list of published sites                                                     | application/json                         | - | data-api/sites.js |
| /api/songtypes/:songtypeId                                                          | GET  | return songtypes `:songtypeId`                                                     | application/json                         | - | data-api/songtypes.js |
| /api/songtypes/all                                                                  | GET  | return list of all songtypes                                                       | application/json                         | - | data-api/songtypes.js |
| /api/species/:speciesId                                                             | GET  | return species associated to `:speciesId`                                          | application/json                         | - | data-api/species.js
| /api/species/list/:limit                                                            | GET  | return list of all species                                                         | application/json                         | - | data-api/species.js
| /api/species/search                                                                 | GET  | return list of species matching a given keyword                                    | application/json                         | - | data-api/species.js
| /api/user/feed/:page                                                                | GET  | return user's feed                                                                 | application/json                         | - | data-api/user.js |
| /api/user/info                                                                      | GET  | return user's info                                                                 | application/json                         | - | data-api/user.js |
| /api/user/projectlist                                                               | GET  | return user's projectlist                                                          | application/json                         | - | data-api/user.js |
| /api/user/search/:query?                                                            | GET  | return user's search                                                               | application/json                         | - | data-api/user.js |
| /api/user/update/name                                                               | POST | update user's name                                                                 | application.json                         | - (proposed: loggedIn) | data-api/user.js |
| /api/user/update/password                                                           | POST | update user's password                                                             | application.json                         | - (proposed: loggedIn) | data-api/user.js |
| /classifiers                                                                        | GET  | render 'classifiers' page                                                          | text/html                                | - | index.js |
| /forgot_request                                                                     | GET  | renders 'forgot-request' page                                                      | text/html                                | - | login.js |
| /forgot_request                                                                     | POST | processes user forgot password requests.                                           | application/json                         | - | login.js |
| /home                                                                               | GET  | render 'home' page                                                                 | text/html                                | - | index.js |
| /login                                                                              | GET  | render 'login' page                                                                | text/html                                | - |  login.js |
| /login                                                                              | POST | logs user in | application/json                                                    | -                                        | login.js |
| /logout                                                                             | GET  | logs user out, redirects to /login                                                 | text/html                                | - | login.js |
| /project/:projecturl?/                                                              | GET  | redirect to /home                                                                  | -                                        | private project, no isSuper and has no permissions in project | project.js |
| /project/:projecturl?/                                                              | GET  | render 'app' page                                                                  | text/html                                | public project, isSuper or has permissions in project | project.js |
| /project/:projecturl?/                                                              | GET  | render 'project_disabled' page                                                     | text/html                                | project is disabled | project.js |
| /register                                                                           | GET  | renders 'register' page                                                            | text/html                                | - | login.js |
| /register                                                                           | POST | processes user registrations.                                                      | application/json                         | - | login.js |
| /reset_password/:hash                                                               | GET  | renders password reset page for account identified with `:hash`                    | text/html                                | - | login.js |
| /reset_password/:hash                                                               | POST | resets password for account identified with `:hash`                                | application/json, text/html on error     | - | login.js |
| /support                                                                            | GET  | render 'support' page                                                              | text/html                                | - | index.js |
| /terms                                                                              | GET  | render 'terms' page                                                                | text/html                                | - | index.js |
| /uploads/audio                                                                      | POST | upload a recording                                                                 | application/json                         | "manage project recordings" permission | uploads.js |
| /uploads/audio                                                                      | POST | upload a recording                                                                 | application/json                         | valid site token | uploads.js |
| /uploads/site-log                                                                   | POST | upload a site-log                                                                  | application/json                         | valid site token | uploads.js |
| /user-settings                                                                      | GET  | redirect to /home                                                                  | -                                        | not loggedIn | index.js |
| /user-settings                                                                      | GET  | render 'user-settings' page                                                        | text/html                                | loggedIn | index.js |
